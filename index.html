<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="apple-itunes-app" content="app-id=6742896499, app-argument=https://gentlercoparent.vercel.app">
    <meta name="description" content="Discover Gentler Coparent, the best co-parenting app to improve communication and manage schedules. Download now for a free trial!">
    <title>Co-Parenting App to Improve Communication | Gentler Coparent</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="icon" type="image/png" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/logos/apple-touch-icon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Raleway:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <div class="logo">
            <a href="index.html">
                <img src="images/logos/main-logo.png" alt="Gentler Coparent Logo">
            </a>
        </div>
        <div class="social-icons">
            <a href="https://www.facebook.com" target="_blank">
                <img src="images/icons/facebook.svg" alt="Facebook">
            </a>
            <a href="https://www.instagram.com" target="_blank">
                <img src="images/icons/instagram.svg" alt="Instagram">
            </a>
            <a href="https://www.x.com" target="_blank">
                <img src="images/icons/x-twitter.svg" alt="X">
            </a>
        </div>
    </header>

    <section class="hero">
        <div class="hero-content">
            <h1>Harmonize Your<br class="mobile-break">Co-Parenting</h1>
            <p class="subheading">Prioritize your children, transform your communication.</p>
        </div>
        <a href="https://apps.apple.com/app/id6742896499" class="btn">Download Now</a>
    </section>

    <section class="intro">
        <h2>Effective Co-Parenting Starts Here</h2>
        <p>At Gentler Coparent, we understand the challenges of co-parenting. Our app is designed to help you communicate effectively, manage schedules, and prioritize your children's well-being. With intuitive features and a user-friendly interface, we make co-parenting less stressful and more collaborative.</p>
    </section>

    <section class="video-section">
        <h2>Watch Our Story</h2>
        <p>Learn more about how Gentler Coparent can transform your co-parenting experience.</p>
        <video controls>
            <source src="images/gentler_coparent.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
    </section>

    <section class="banner-section">
        <img src="images/gcp_x_banner.png" alt="Gentler Coparent Banner" class="banner-image">
    </section>

    <section class="cta">
        <h2>Ready to Simplify Co-Parenting?</h2>
        <p class="subheading">Download Gentler Coparent today and start building a better future for your family.</p>
        <a href="https://apps.apple.com/app/id6742896499" class="btn">Get Started Now</a>
    </section>

    <section class="final-message">
        <img src="images/logos/logo-symbol.png" alt="Dove Icon">
        <p>Harmonizing co-parenting, one conversation at a time.</p>
    </section>

    <footer>
        <div class="footer-links">
            <a href="index.html">Home</a>
            <a href="about.html">About</a>
            <a href="contact.html">Contact</a>
            <a href="privacy-policy.html">Privacy Policy</a>
            <a href="usage-agreement.html">Usage Agreement</a>
        </div>
        <div class="social-icons">
            <a href="https://www.facebook.com" target="_blank">
                <img src="images/icons/facebook.svg" alt="Facebook">
            </a>
            <a href="https://www.instagram.com" target="_blank">
                <img src="images/icons/instagram.svg" alt="Instagram">
            </a>
            <a href="https://www.x.com" target="_blank">
                <img src="images/icons/x-twitter.svg" alt="X">
            </a>
        </div>
        <p>Â© 2025 Gentler Coparent. All rights reserved.</p>
    </footer>

    <!-- Bottom Sheet for App Download -->
    <div id="app-bottom-sheet-overlay" class="app-bottom-sheet-overlay"></div>
    <div id="app-bottom-sheet" class="app-bottom-sheet" data-dragging="false">
        <div class="app-bottom-sheet-content">
            <div class="grab-handle" aria-label="Drag to dismiss"></div>
            <img src="images/logos/main-logo.png" alt="Gentler Coparent Logo" class="app-bottom-sheet-logo">
            <h3>Get the Gentler Coparent App</h3>
            <p>Transform your co-parenting experience today.</p>
            <a href="https://apps.apple.com/app/id6742896499" class="btn app-download-btn">FREE TRIAL</a>
            <a href="#" id="dismiss-bottom-sheet" class="dismiss-link">Not now</a>
        </div>
    </div>

    <!-- JavaScript to Show/Hide Bottom Sheet and Handle Dragging -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const bottomSheet = document.getElementById('app-bottom-sheet');
            const overlay = document.getElementById('app-bottom-sheet-overlay');
            const dismissLink = document.getElementById('dismiss-bottom-sheet');
            const grabHandle = document.querySelector('.grab-handle');
            const downloadBtn = document.querySelector('.app-download-btn');
            const content = document.querySelector('.app-bottom-sheet-content');

            if (!bottomSheet || !overlay || !dismissLink || !grabHandle || !downloadBtn || !content) {
                console.error('Bottom sheet elements not found:', {
                    bottomSheet: !!bottomSheet,
                    overlay: !!overlay,
                    dismissLink: !!dismissLink,
                    grabHandle: !!grabHandle,
                    downloadBtn: !!downloadBtn,
                    content: !!content
                });
                return;
            }

            // Detect if the device is iOS or iPadOS
            const isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);
            console.log('Is iOS/iPadOS device:', isIOS);

            if (isIOS) {
                bottomSheet.style.display = 'block';
                overlay.style.display = 'block';
                bottomSheet.classList.add('slide-up');
                document.body.classList.add('no-scroll');
            } else {
                bottomSheet.style.display = 'none';
                overlay.style.display = 'none';
                document.body.classList.remove('no-scroll');
                return;
            }

            // Dismiss the sheet
            function dismissBottomSheet() {
                bottomSheet.classList.remove('slide-up');
                bottomSheet.classList.add('slide-down');
                overlay.style.opacity = '0';
                setTimeout(() => {
                    bottomSheet.style.display = 'none';
                    overlay.style.display = 'none';
                    document.body.classList.remove('no-scroll');
                }, 300); // Shorter duration for native feel
            }

            // Detent positions (as percentages of window height)
            const detents = [
                { height: 0, label: 'full' },         // Full height (0px translate)
                { height: window.innerHeight * 0.25, label: 'medium' }, // 25% height
                { height: window.innerHeight * 0.5,  label: 'large' }   // 50% height
            ];
            let currentDetentIndex = 0; // Start at full height

            // Touch state
            let touchStartY = 0;
            let touchCurrentY = 0;
            let touchStartTime = 0;
            let velocity = 0;
            let isDragging = false;
            let animationFrameId = null;

            // Animate with momentum and detents
            const animate = (targetY) => {
                if (isDragging) return;
                let startY = parseFloat(bottomSheet.style.transform.replace('translateY(', '').replace('px)', '') || 0);
                let currentY = startY;
                const duration = 300; // ms
                const startTime = performance.now();

                const easeOutQuad = (t) => t * (2 - t); // Easing function for natural deceleration

                function step(timestamp) {
                    const progress = Math.min((timestamp - startTime) / duration, 1);
                    const easedProgress = easeOutQuad(progress);
                    currentY = startY + (targetY - startY) * easedProgress;

                    // Apply rubber band effect at edges
                    const maxY = window.innerHeight - bottomSheet.offsetHeight;
                    if (currentY < -20) currentY = -20 * (1 - easeOutQuad(1 - (-currentY / 20))); // Bounce at top
                    if (currentY > maxY + 20) currentY = maxY + 20 * easeOutQuad((currentY - maxY) / 20); // Bounce at bottom

                    bottomSheet.style.transform = `translateY(${Math.round(currentY)}px)`;
                    overlay.style.opacity = Math.max(0, 1 - (currentY / (window.innerHeight * 0.5)));

                    if (progress < 1) {
                        animationFrameId = requestAnimationFrame(step);
                    } else {
                        // Snap to nearest detent
                        const distances = detents.map(d => Math.abs(currentY - d.height));
                        const nearestIndex = distances.indexOf(Math.min(...distances));
                        currentDetentIndex = nearestIndex;
                        if (nearestIndex === detents.length - 1 && currentY > detents[nearestIndex].height) {
                            dismissBottomSheet();
                        } else {
                            bottomSheet.style.transform = `translateY(${detents[nearestIndex].height}px)`;
                        }
                    }
                }

                animationFrameId = requestAnimationFrame(step);
            };

            // Handle touch events
            bottomSheet.addEventListener('touchstart', (e) => {
                if (e.target === downloadBtn || e.target === dismissLink) return;
                e.preventDefault();
                isDragging = true;
                touchStartY = e.touches[0].clientY;
                touchStartTime = performance.now();
                bottomSheet.setAttribute('data-dragging', 'true');
                bottomSheet.style.transition = 'none';
                cancelAnimationFrame(animationFrameId);
            }, { passive: false });

            bottomSheet.addEventListener('touchmove', (e) => {
                if (!isDragging) return;
                const currentTime = performance.now();
                const deltaTime = currentTime - touchStartTime;
                touchCurrentY = e.touches[0].clientY;
                const deltaY = touchCurrentY - touchStartY;
                velocity = deltaY / deltaTime; // Velocity in px/ms
                bottomSheet.style.transform = `translateY(${Math.max(0, deltaY)}px)`;
                overlay.style.opacity = Math.max(0, 1 - (deltaY / (window.innerHeight * 0.5)));
                touchStartTime = currentTime;
            }, { passive: true });

            bottomSheet.addEventListener('touchend', () => {
                if (!isDragging) return;
                isDragging = false;
                bottomSheet.setAttribute('data-dragging', 'false');
                const deltaY = touchCurrentY - touchStartY;
                const momentumDistance = velocity * 200; // Adjust multiplier for momentum feel
                const targetY = Math.min(0, Math.max(window.innerHeight - bottomSheet.offsetHeight, parseFloat(bottomSheet.style.transform.replace('translateY(', '').replace('px)', '') || 0) + momentumDistance));

                animate(targetY);
            });

            // Dismiss button
            dismissLink.addEventListener('click', (e) => {
                e.preventDefault();
                dismissBottomSheet();
            });

            // Prevent default scrolling during drag
            bottomSheet.addEventListener('touchmove', (e) => {
                if (isDragging) e.preventDefault();
            }, { passive: false });
        });
    </script>
</body>
</html>